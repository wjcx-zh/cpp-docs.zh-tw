---
title: IEEE 浮點表示
ms.date: 05/06/2019
helpviewer_keywords:
- float keyword
- real*8 value
- floating-point numbers, IEEE representation
- double data type, floating-point representation
- IEEE floating point representation
- real*10 value
- long double
- real*4 value
ms.assetid: 537833e8-fe05-49fc-8169-55fd0314b195
ms.openlocfilehash: 47802a32d43824b4e568ca520c360dc7b12cbf8c
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/27/2020
ms.locfileid: "87231542"
---
# <a name="ieee-floating-point-representation"></a>IEEE 浮點表示

Microsoft c + + （MSVC）與 IEEE 數值標準一致。 IEEE-754 標準描述浮點格式，這是一種可在硬體中表示實際數位的方式。 在 MSVC 編譯器的目標硬體中，可顯示的浮點數至少有五個內部格式可供使用。 編譯器只會使用其中兩個。 *單精確度*（4位元組）和*雙精確度*（8位元組）格式會在 MSVC 中使用。 單精確度是使用關鍵字來宣告 **`float`** 。 雙精確度是使用關鍵字來宣告 **`double`** 。 IEEE 標準也會指定*半精確度*（2位元組）和*四精確度*（16個位元組）格式，以及*雙擴充精確度*（10位元組）格式，其中某些 C 和 c + + 編譯器會實作為 **`long double`** 資料類型。 在 MSVC 編譯器中， **`long double`** 資料類型會被視為不同的類型，但是儲存類型會對應到 **`double`** 。 不過，內部和元件語言支援使用其他格式的計算，包括雙延伸精確度格式（硬體支援）。

這些值會以下列方式儲存：

|值|儲存為|
|-----------|---------------|
|單精確度|正負號位，8位指數，23位有效位數|
|雙精確度|正負號位，11位指數，52-bit 有效位數|

在單精確度和雙精確度的格式中，小數部分會假設有前置字元1。 小數部分稱為*有效位數*（有時也稱為「*尾數*」）。 這個前置的1不會儲存在記憶體中，因此，significands 實際上是24或53位，即使儲存一個較少的位也一樣。 雙延伸精確度格式實際上會儲存此位。

指數的偏差是其可能值的一半。 這表示您會從儲存的指數減去這個偏差，以取得實際的指數。 如果儲存的指數小於偏差，實際上是負指數。

指數的偏差如下：

|指數|偏差依據|
|--------------|---------------|
|8位（單精確度）|127|
|11位（雙精確度）|1023|

這些指數不是10的乘冪;它們是兩個的乘冪。 也就是說，8位儲存指數的範圍可以從-127 到127，儲存為0到254。 值 2<sup>127</sup>大致等於 10<sup>38</sup>，這是單精確度的實際限制。

有效位數會儲存為1.XXX 格式的二進位分數。 這個分數具有大於或等於1且小於2的值。 實際數位一律以*正規化形式*儲存。 也就是說，有效位數會向左移位，讓有效位數的高序位位一律為1。 因為此位*一律*為1，所以會假設（不會儲存）為單精確度和雙精確度格式。 二元（非十進位）點會假設為前置1的右邊。

浮點標記法的格式如下所示：

|[格式]|位元組1|位元組2|位元組3|位元組4|...|位元組 n|
|------------|------------|------------|------------|------------|---------|------------|
|單精確度| `SXXXXXXX`|`XMMMMMMM`|`MMMMMMMM`|`MMMMMMMM`|||
|雙精確度|`SXXXXXXX`|`XXXXMMMM`|`MMMMMMMM`|`MMMMMMMM`|...|`MMMMMMMM`|

`S`代表正負號位，的 `X` 是偏誤的指數位，而的 `M` 是有效位數位。 最左邊的位採用單精確度和雙精確度的格式。

若要正確地移位二進位點，您必須先 unbias 指數，然後將二元點向右或向左移動適當的位數。

## <a name="special-values"></a>特殊值

浮點格式包括特別處理的一些值。

### <a name="zero"></a>零個

零無法正規化，使其以單精確度或雙精確度值的正規化形式無法顯示。 所有零的特殊位模式代表0。 您也可以在設定正負號位的情況下，將-0 表示為零，但-0 和0一律會比較為相等。

### <a name="infinities"></a>無限

+ ∞和−∞值是以所有資料的指數表示，而所有的有效位數則是零。 正數和負數會使用符號位來表示。

### <a name="subnormals"></a>Subnormals

可能會以正規化形式表示小於最小數目的數位。 它們稱為*偏低*或*denormal*數位。 如果指數全部為零，而且有效位數為非零，則有效位數的隱含前置位會被視為零，而不是一個。 當有效位數中的前置零數目增加時，偏低數位的精確度會下降。

### <a name="nan---not-a-number"></a>NaN-不是數位

在 IEEE 浮點格式中，可以代表不是實數的值，例如 0/0。 這種類型的值稱為*NaN*。 NaN 是以所有的指數和非零的有效位數來表示。 有兩種類型的*nan、無*訊息的 Nan 或 QNaNs，以及*信號*nan 或 SNaNs。 無訊息的 Nan 在有效位數中有前置的，並且會透過運算式傳播。 它們代表不確定的值，例如除以無限大的結果，或將無限大乘以零。 在有效位數中，發出 Nan 的信號有前置零。 它們用於不正確作業，以指示浮點硬體例外狀況。

## <a name="examples"></a>範例

以下是單精確度格式的一些範例：

- 若為值2，符號位為零。 儲存的指數為128或 1000 0000 （二進位），也就是127加1。 儲存的二進位有效位數是（1） 000 0000 0000 0000 0000 0000，其具有隱含的1和二元點，因此實際的有效位數是一個。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |2|1 * 2<sup>1</sup>|0100 0000 0000 0000 0000 0000 0000 0000|0x40000000|

- 值-2。 與 + 2 相同，不同之處在于已設定正負號位。 所有 IEEE 格式浮點數的負數也是如此。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |-2|-1 * 2<sup>1</sup>|1100 0000 0000 0000 0000 0000 0000 0000|0xC0000000|

- 值4。 相同的有效位數，指數會增加一個（偏誤的值是129，或 100 0000 1 （二進位）。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |4|1 * 2<sup>2</sup>|0100 0000 1000 0000 0000 0000 0000 0000|0x40800000|

- 值6。 相同的指數，有效位數會大於一半。 這是（1.） 100 0000 .。。0000 0000，因為它是二進位分數，所以是 1 1/2，因為小數數位的值是1/2、1/4、1/8 等等。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |6|1.5 * 2<sup>2</sup>|0100 0000 1100 0000 0000 0000 0000 0000|0x40C00000|

- 值1。 與另一個2的乘冪相同的有效位數，偏誤指數是介於127的2，或 011 1111 1 （二進位）。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |1|1 * 2<sup>0</sup>|0011 1111 1000 0000 0000 0000 0000 0000|0x3F800000|

- 值0.75。 偏誤指數是126、011 1111 0 （二進位），而有效位數是（1） 100 0000 .。。0000 0000，也就是 1 1/2。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |0.75|1.5 * 2<sup>-1</sup>|0011 1111 0100 0000 0000 0000 0000 0000|0x3F400000|

- 值2.5。 與兩個完全相同，不同之處在于表示1/4 的位是在有效位數中設定。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |2.5|1.25 * 2<sup>1</sup>|0100 0000 0010 0000 0000 0000 0000 0000|0x40200000|

- 1/10 是二進位中的重複分數。 有效位數小於1.6，而偏誤指數表示1.6 是除以16。 （在二進位中是 011 1101 1，在十進位中是123）。True 指數為 123-127 =-4，這表示乘以相乘的因數為 2<sup>-4</sup> = 1/16。 已儲存的有效位數會在最後一個位中無條件進位，以儘量精確地表示無法顯示數位。 （1/10 和1/100 無法以二進位格式完全顯示的原因，與1/3 無法完全以 decimal 表示）的原因類似。）

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |0.1|1.6 * 2<sup>-4</sup>|0011 1101 1100 1100 1100 1100 1100 1101|0x3DCCCCCD|

- 零是特殊案例。 它使用的公式可能是可表示的最小值，也就是零。

   |值|Formula|二進位標記法|十六進位|
   |-|-|-|-|
   |0|1 * 2<sup>-128</sup>|0000 0000 0000 0000 0000 0000 0000 0000|0x00000000|

## <a name="see-also"></a>另請參閱

[浮點數可能失去精確度的原因](why-floating-point-numbers-may-lose-precision.md)
