---
title: 預先定義巨集
description: 列出並描述 Microsoft c + + 編譯器預先定義的預處理器宏。
ms.custom: update_every_version
ms.date: 09/11/2020
f1_keywords:
- _ATL_VER
- __ATOM__
- __AVX__
- __AVX2__
- __AVX512BW__
- __AVX512CD__
- __AVX512DQ__
- __AVX512F__
- __AVX512VL__
- _CHAR_UNSIGNED
- __CLR_VER
- _CONTROL_FLOW_GUARD
- __COUNTER__
- __cplusplus
- __cplusplus_cli
- __cplusplus_winrt
- _CPPRTTI
- _CPPUNWIND
- __DATE__
- _DEBUG
- _DLL
- __FILE__
- __FUNCDNAME__
- __FUNCSIG__
- __FUNCTION__
- _INTEGRAL_MAX_BITS
- _ISO_VOLATILE
- _KERNEL_MODE
- __LINE__
- _M_AMD64
- _M_ARM
- _M_ARM_ARMV7VE
- _M_ARM_FP
- _M_ARM64
- _M_CEE
- _M_CEE_PURE
- _M_CEE_SAFE
- _M_FP_EXCEPT
- _M_FP_FAST
- _M_FP_PRECISE
- _M_FP_STRICT
- _M_IX86
- _M_IX86_FP
- _M_X64
- _MANAGED
- _MFC_VER
- _MSC_BUILD
- _MSC_EXTENSIONS
- _MSC_FULL_VER
- _MSC_VER
- _MSVC_LANG
- __MSVC_RUNTIME_CHECKS
- _MT
- _NATIVE_WCHAR_T_DEFINED
- _NO_SIZED_DEALLOCATION
- _OPENMP
- _PREFAST_
- _RESUMABLE_FUNCTIONS_SUPPORTED
- _RTC_CONVERSION_CHECKS_ENABLED
- __STDC__
- __STDC_HOSTED__
- __STDC_NO_ATOMICS__
- __STDC_NO_COMPLEX__
- __STDC_NO_THREADS__
- __STDC_NO_VLA__
- __STDC_VERSION__
- __STDCPP_THREADS__
- __TIME__
- __TIMESTAMP__
- __VA_ARGS__
- _VC_NODEFAULTLIB
- _WCHAR_T_DEFINED
- _WIN32
- _WIN64
- _WINRT_DLL
helpviewer_keywords:
- timestamps, preprocessor macro
- cl.exe compiler, version number
- version numbers, C/C++ compiler (cl.exe)
- macros, predefined C++
- preprocessor, macros
- predefined macros
- _ATL_VER macro
- __ATOM__ macro
- __AVX__ macro
- __AVX2__ macro
- __AVX512BW__ macro
- __AVX512CD__ macro
- __AVX512DQ__ macro
- __AVX512F__ macro
- __AVX512VL__ macro
- _CHAR_UNSIGNED macro
- __CLR_VER macro
- _CONTROL_FLOW_GUARD macro
- __COUNTER__ macro
- __cplusplus macro
- __cplusplus_cli macro
- __cplusplus_winrt macro
- _CPPRTTI macro
- _CPPUNWIND macro
- __DATE__ macro
- _DEBUG macro
- _DLL macro
- __FILE__ macro
- __FUNCDNAME__ macro
- __FUNCSIG__ macro
- __FUNCTION__ macro
- _INTEGRAL_MAX_BITS macro
- _ISO_VOLATILE macro
- _KERNEL_MODE macro
- __LINE__ macro
- _M_AMD64 macro
- _M_ARM macro
- _M_ARM_ARMV7VE macro
- _M_ARM_FP macro
- _M_ARM64 macro
- _M_CEE macro
- _M_CEE_PURE macro
- _M_CEE_SAFE macro
- _M_FP_EXCEPT macro
- _M_FP_FAST macro
- _M_FP_PRECISE macro
- _M_FP_STRICT macro
- _M_IX86 macro
- _M_IX86_FP macro
- _M_X64 macro
- _MANAGED macro
- _MFC_VER macro
- _MSC_BUILD macro
- _MSC_EXTENSIONS macro
- _MSC_FULL_VER macro
- _MSC_VER macro
- _MSVC_LANG macro
- __MSVC_RUNTIME_CHECKS macro
- _MT macro
- _NATIVE_WCHAR_T_DEFINED macro
- _NO_SIZED_DEALLOCATION macro
- _OPENMP macro
- _PREFAST_ macro
- _RESUMABLE_FUNCTIONS_SUPPORTED macro
- _RTC_CONVERSION_CHECKS_ENABLED macro
- __STDC__ macro
- __STDC_HOSTED__ macro
- __STDC_NO_ATOMICS__ macro
- __STDC_NO_COMPLEX__ macro
- __STDC_NO_THREADS__ macro
- __STDC_NO_VLA__ macro
- __STDC_VERSION__ macro
- __STDCPP_THREADS__ macro
- __TIME__ macro
- __TIMESTAMP__ macro
- __VA_ARGS__ macro
- _VC_NODEFAULTLIB macro
- _WCHAR_T_DEFINED macro
- _WIN32 macro
- _WIN64 macro
- _WINRT_DLL macro
- __func__ identifier
ms.assetid: 1cc5f70a-a225-469c-aed0-fe766238e23f
no-loc:
- _ATL_VER
- __ATOM__
- __AVX__
- __AVX2__
- __AVX512BW__
- __AVX512CD__
- __AVX512DQ__
- __AVX512F__
- __AVX512VL__
- _CHAR_UNSIGNED
- __CLR_VER
- _CONTROL_FLOW_GUARD
- __COUNTER__
- __cplusplus
- __cplusplus_cli
- __cplusplus_winrt
- _CPPRTTI
- _CPPUNWIND
- __DATE__
- _DEBUG
- _DLL
- __FILE__
- __FUNCDNAME__
- __FUNCSIG__
- __FUNCTION__
- _INTEGRAL_MAX_BITS
- _ISO_VOLATILE
- _KERNEL_MODE
- __LINE__
- _M_AMD64
- _M_ARM
- _M_ARM_ARMV7VE
- _M_ARM_FP
- _M_ARM64
- _M_CEE
- _M_CEE_PURE
- _M_CEE_SAFE
- _M_FP_EXCEPT
- _M_FP_FAST
- _M_FP_PRECISE
- _M_FP_STRICT
- _M_IX86
- _M_IX86_FP
- _M_X64
- _MANAGED
- _MFC_VER
- _MSC_BUILD
- _MSC_EXTENSIONS
- _MSC_FULL_VER
- _MSC_VER
- _MSVC_LANG
- __MSVC_RUNTIME_CHECKS
- _MT
- _NATIVE_WCHAR_T_DEFINED
- _NO_SIZED_DEALLOCATION
- _OPENMP
- _PREFAST_
- _RESUMABLE_FUNCTIONS_SUPPORTED
- _RTC_CONVERSION_CHECKS_ENABLED
- __STDC__
- __STDC_HOSTED__
- __STDC_NO_ATOMICS__
- __STDC_NO_COMPLEX__
- __STDC_NO_THREADS__
- __STDC_NO_VLA__
- __STDC_VERSION__
- __STDCPP_THREADS__
- __TIME__
- __TIMESTAMP__
- __VA_ARGS__
- _VC_NODEFAULTLIB
- _WCHAR_T_DEFINED
- _WIN32
- _WIN64
- _WINRT_DLL
- __func__
ms.openlocfilehash: 85b467a0ac3db67b2715a849966618697437658b
ms.sourcegitcommit: b492516cc65120250b9ea23f96f7f63f37f99fae
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/14/2020
ms.locfileid: "90075695"
---
# <a name="predefined-macros"></a>預先定義巨集

Microsoft C/c + + 編譯器 (MSVC) 會根據語言 (C 或 c + +) 、編譯目標和所選擇的編譯器選項，來預先定義特定的預處理器宏。

MSVC 支援 ANSI/ISO C99、C11 和 C17 標準所需的預先定義預處理器宏，以及 ISO c + + 14 和 c + + 17 標準。 此執行也支援數個 Microsoft 特定的預處理器宏。 某些宏只會針對特定組建環境或編譯器選項來定義。 除非有注明，否則宏會在整個轉譯單位中定義，就像是指定為 **`/D`** 編譯器選項引數一樣。 當定義時，預處理器會在編譯之前將宏展開為指定的值。 預先定義的宏不會採用任何引數，也無法重新定義。

## <a name="standard-predefined-identifier"></a>標準預先定義識別碼

編譯器支援 ISO C99 和 ISO c + + 11 所指定的預先定義識別碼。

- `__func__` 封入函式的非限定和未名稱，作為的函式區域 **靜態常數** 陣列 **`char`** 。

    ```cpp
    void example(){
        printf("%s\n", __func__);
    } // prints "example"
    ```

## <a name="standard-predefined-macros"></a>標準預先定義宏

編譯器支援 ISO C99、C11、C17 和 ISO c + + 17 標準所指定的預先定義宏。

- `__cplusplus` 當轉譯單位編譯為 c + + 時，定義為整數常值。 否則為未定義。

- `__DATE__` 目前原始程式檔的編譯日期。 日期是格式為 *Mmm dd yyyy*的常數長度字串常值。 月份名稱 *Mmm* 與 C 執行時間程式庫所產生的縮寫月份名稱相同 (CRT) [asctime](../c-runtime-library/reference/asctime-wasctime.md) 函式。 如果值小於10，則日期 *dd* 的第一個字元是空格。 一律會定義這個宏。

- `__FILE__` 目前原始程式檔的名稱。 `__FILE__` 展開為字元字串常值。 若要確保顯示檔案的完整路徑，請[ **`/FC`** 在 [診斷]) 中使用 (原始程式碼檔的完整路徑](../build/reference/fc-full-path-of-source-code-file-in-diagnostics.md)。 一律會定義這個宏。

- `__LINE__` 定義為目前原始程式檔中的整數行號。 您可以使用指示詞來 `__LINE__` 變更宏的值 `#line` 。 一律會定義這個宏。

- `__STDC__` 只有在編譯為 C 且已指定編譯器選項時，才會定義為 1 [**`/Za`**](../build/reference/za-ze-disable-language-extensions.md) 。 否則為未定義。

- `__STDC_HOSTED__` 如果實作為裝載的 *執行*，則定義為1，其中一個支援整個必要的標準程式庫。 否則，定義為0。

- `__STDC_NO_ATOMICS__` 如果執行不支援選擇性標準 atomics，則定義為1。 MSVC 執行會在編譯為 C 時將其定義為1，並 [**`/std`**](../build/reference/std-specify-language-standard-version.md) 指定其中一個 C11 或 C17 選項。

- `__STDC_NO_COMPLEX__` 如果實值不支援選擇性標準複數，則定義為1。 MSVC 執行會在編譯為 C 時將其定義為1，並 [**`/std`**](../build/reference/std-specify-language-standard-version.md) 指定其中一個 C11 或 C17 選項。

- `__STDC_NO_THREADS__` 如果執行不支援選擇性標準執行緒，則定義為1。 MSVC 執行會在編譯為 C 時將其定義為1，並 [**`/std`**](../build/reference/std-specify-language-standard-version.md) 指定其中一個 C11 或 C17 選項。

- `__STDC_NO_VLA__` 如果執行不支援標準變數長度陣列，則定義為1。 MSVC 執行會在編譯為 C 時將其定義為1，並 [**`/std`**](../build/reference/std-specify-language-standard-version.md) 指定其中一個 C11 或 C17 選項。

- `__STDC_VERSION__` 在編譯為 C 並指定其中一個 **`/std`** C11 或 C17 選項時定義。 它會 `201112L` 針對 [**`/std:c11`**](../build/reference/std-specify-language-standard-version.md) 、和展開 `201710L` [**`/std:c17`**](../build/reference/std-specify-language-standard-version.md) 。

- `__STDCPP_THREADS__` 只有在程式可以有多個執行中的執行緒，並編譯為 c + + 時，才會定義為1。 否則為未定義。

- `__TIME__` 前置處理過的轉譯單位轉譯時間。 時間是格式為 *hh： mm： ss*的字元字串常值，與 CRT [asctime](../c-runtime-library/reference/asctime-wasctime.md) 函式所傳回的時間相同。 一律會定義這個宏。

## <a name="microsoft-specific-predefined-macros"></a>Microsoft 特有的預先定義宏

MSVC 支援這些額外的預先定義宏。

- `__ATOM__` 當 [**`/favor:ATOM`**](../build/reference/favor-optimize-for-architecture-specifics.md) 編譯器選項已設定且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX__` 當已 [**`/arch:AVX`**](../build/reference/arch-x86.md) [**`/arch:AVX2`**](../build/reference/arch-x86.md) 設定、或 [**`/arch:AVX512`**](../build/reference/arch-x86.md) 編譯器選項，且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX2__` 當 [**`/arch:AVX2`**](../build/reference/arch-x86.md) [**`/arch:AVX512`**](../build/reference/arch-x86.md) 設定或編譯器選項，且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX512BW__` 當 [**`/arch:AVX512`**](../build/reference/arch-x86.md) 編譯器選項已設定且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX512CD__` 當 [**`/arch:AVX512`**](../build/reference/arch-x86.md) 編譯器選項已設定且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX512DQ__` 當 [**`/arch:AVX512`**](../build/reference/arch-x86.md) 編譯器選項已設定且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX512F__` 當 [**`/arch:AVX512`**](../build/reference/arch-x86.md) 編譯器選項已設定且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `__AVX512VL__` 當 [**`/arch:AVX512`**](../build/reference/arch-x86.md) 編譯器選項已設定且編譯器目標是 x86 或 x64 時，定義為1。 否則為未定義。

- `_CHAR_UNSIGNED` 如果預設 **`char`** 類型為未簽署，則定義為1。 當[ **`/J`** (預設 char 類型為未簽署) ](../build/reference/j-default-char-type-is-unsigned.md)編譯器選項已設定時，就會定義這個值。 否則為未定義。

- `__CLR_VER` 定義為整數常值，表示用來編譯應用程式之 Common Language Runtime (CLR) 的版本。 值的編碼格式為 `Mmmbbbbb` ，其中 `M` 是執行時間的主要版本、執行時間的 `mm` 次要版本，而 `bbbbb` 是組建編號。 `__CLR_VER` 如果已設定編譯器選項，則會定義 [**`/clr`**](../build/reference/clr-common-language-runtime-compilation.md) 。 否則為未定義。

    ```cpp
    // clr_ver.cpp
    // compile with: /clr
    using namespace System;
    int main() {
       Console::WriteLine(__CLR_VER);
    }
    ```

- `_CONTROL_FLOW_GUARD`當[ **`/guard:cf`** (啟用控制流程防護) ](../build/reference/guard-enable-control-flow-guard.md)編譯器選項設定為1時定義為1。 否則為未定義。

- `__COUNTER__` 展開為從0開始的整數常值。 每次在原始程式檔中使用此值，或在原始程式檔的包含標頭中使用時，此值會遞增1。 `__COUNTER__`當您使用先行編譯標頭檔時， 會記住其狀態。 一律會定義這個宏。

  這個範例會使用 `__COUNTER__` ，將唯一識別碼指派給相同類型的三個不同物件。 此函 `exampleClass` 式會採用整數作為參數。 在中 `main` ，應用程式會 `exampleClass` 使用 `__COUNTER__` 做為唯一識別碼參數，宣告類型的三個物件：

    ```cpp
    // macro__COUNTER__.cpp
    // Demonstration of __COUNTER__, assigns unique identifiers to
    // different objects of the same type.
    // Compile by using: cl /EHsc /W4 macro__COUNTER__.cpp
    #include <stdio.h>

    class exampleClass {
        int m_nID;
    public:
        // initialize object with a read-only unique ID
        exampleClass(int nID) : m_nID(nID) {}
        int GetID(void) { return m_nID; }
    };

    int main()
    {
        // __COUNTER__ is initially defined as 0
        exampleClass e1(__COUNTER__);

        // On the second reference, __COUNTER__ is now defined as 1
        exampleClass e2(__COUNTER__);

        // __COUNTER__ is now defined as 2
        exampleClass e3(__COUNTER__);

        printf("e1 ID: %i\n", e1.GetID());
        printf("e2 ID: %i\n", e2.GetID());
        printf("e3 ID: %i\n", e3.GetID());

        // Output
        // ------------------------------
        // e1 ID: 0
        // e2 ID: 1
        // e3 ID: 2

        return 0;
    }
    ```

- `__cplusplus_cli` 在編譯為 c + + 並設定編譯器選項時，定義為整數常值 200406 [**`/clr`**](../build/reference/clr-common-language-runtime-compilation.md) 。 否則為未定義。 當定義時， `__cplusplus_cli` 在整個轉譯單位中都有效。

    ```cpp
    // cplusplus_cli.cpp
    // compile by using /clr
    #include "stdio.h"
    int main() {
       #ifdef __cplusplus_cli
          printf("%d\n", __cplusplus_cli);
       #else
          printf("not defined\n");
       #endif
    }
    ```

- `__cplusplus_winrt`在編譯為 c + + 且已設定[ **`/ZW`** (Windows 執行階段編譯) ](../build/reference/zw-windows-runtime-compilation.md)編譯器選項時，定義為整數常值201009。 否則為未定義。

- `_CPPRTTI`如果已設定[ **`/GR`** (啟用執行時間類型資訊) ](../build/reference/gr-enable-run-time-type-information.md)編譯器選項，則定義為1。 否則為未定義。

- `_CPPUNWIND`如果有一或多個[ **`/GX`** (啟用例外狀況處理) ](../build/reference/gx-enable-exception-handling.md)、 [ **`/clr`** (Common Language Runtime 編譯) ](../build/reference/clr-common-language-runtime-compilation.md)，或 (編譯器選項設定[ **`/EH`**) 例外狀況處理模型](../build/reference/eh-exception-handling-model.md)，則定義為1。 否則為未定義。

- `_DEBUG` 當 [**`/LDd`**](../build/reference/md-mt-ld-use-run-time-library.md) [**`/MDd`**](../build/reference/md-mt-ld-use-run-time-library.md) 已設定、或編譯器選項時，定義為 1 [**`/MTd`**](../build/reference/md-mt-ld-use-run-time-library.md) 。 否則為未定義。

- `_DLL` 在 [**`/MD`**](../build/reference/md-mt-ld-use-run-time-library.md) [**`/MDd`**](../build/reference/md-mt-ld-use-run-time-library.md) 設定或 (多執行緒 DLL) 編譯器選項時，定義為1。 否則為未定義。

- `__FUNCDNAME__` 定義為字串常值，其中包含封入函式的 [裝飾名稱](../build/reference/decorated-names.md) 。 宏只會在函式中定義。 `__FUNCDNAME__`如果您使用 [**`/EP`**](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md) 或編譯器選項，則不會展開宏 [**`/P`**](../build/reference/p-preprocess-to-a-file.md) 。

   這個範例會使用 `__FUNCDNAME__` 、 `__FUNCSIG__` 和 `__FUNCTION__` 宏來顯示函數資訊。

   [!code-cpp[NVC_Predefined_Macros_Examples#1](../preprocessor/codesnippet/CPP/predefined-macros_1.cpp)]

- `__FUNCSIG__` 定義為字串常值，其中包含封入函式的簽章。 宏只會在函式中定義。 `__FUNCSIG__`如果您使用 [**`/EP`**](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md) 或編譯器選項，則不會展開宏 [**`/P`**](../build/reference/p-preprocess-to-a-file.md) 。 針對64位目標編譯時，呼叫慣例 **`__cdecl`** 預設為。 如需使用方式的範例，請參閱 `__FUNCDNAME__` 宏。

- `__FUNCTION__` 定義為字串常值，其中包含封入函式的未裝飾名稱稱。 宏只會在函式中定義。 `__FUNCTION__`如果您使用 [**`/EP`**](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md) 或編譯器選項，則不會展開宏 [**`/P`**](../build/reference/p-preprocess-to-a-file.md) 。 如需使用方式的範例，請參閱 `__FUNCDNAME__` 宏。

- `_INTEGRAL_MAX_BITS` 定義為整數常值64，非向量整數類型的大小上限 () 位。 一律會定義這個宏。

   ```cpp
   // integral_max_bits.cpp
   #include <stdio.h>
   int main() {
      printf("%d\n", _INTEGRAL_MAX_BITS);
   }
   ```

- `__INTELLISENSE__` 在 IntelliSense 編譯器于 Visual Studio IDE 中傳遞期間定義為1。 否則為未定義。 您可以使用這個宏來保護 IntelliSense 編譯器不了解的程式碼，或使用它來切換組建和 IntelliSense 編譯器。 如需詳細資訊，請參閱 [IntelliSense 的疑難排解秘訣緩慢](https://devblogs.microsoft.com/cppblog/troubleshooting-tips-for-intellisense-slowness/)。

- `_ISO_VOLATILE` 如果已設定編譯器選項，則定義為 1 [**`/volatile:iso`**](../build/reference/volatile-volatile-keyword-interpretation.md) 。 否則為未定義。

- `_KERNEL_MODE`如果已設定[ **`/kernel`** (建立核心模式二進位) ](../build/reference/kernel-create-kernel-mode-binary.md)編譯器選項，則定義為1。 否則為未定義。

- `_M_AMD64` 針對以 x64 處理器為目標的編譯，定義為整數常值100。 否則為未定義。

- `_M_ARM` 針對以 ARM 處理器為目標的編譯，定義為整數常值7。 否則為未定義。

- `_M_ARM_ARMV7VE` 當 [**`/arch:ARMv7VE`**](../build/reference/arch-arm.md) 編譯器選項設定為以 ARM 處理器為目標的編譯時，定義為1。 否則為未定義。

- `_M_ARM_FP` 定義為整數常值，表示為 [**`/arch`**](../build/reference/arch-arm.md) ARM 處理器目標設定的編譯器選項。 否則為未定義。

  - 如果未指定 arm 選項，則為30-39 範圍內的值 **`/arch`** ，表示 arm 的預設架構已設定 (`VFPv3`) 。

  - 如果已設定，則為40-49 範圍內的值 **`/arch:VFPv4`** 。

  - 如需詳細資訊，請參閱[ **`/arch`** (ARM) ](../build/reference/arch-arm.md)。

- `_M_ARM64` 針對以64位 ARM 處理器為目標的編譯定義為1。 否則為未定義。

- `_M_CEE`如果已設定任何[ **`/clr`** (Common Language Runtime 編譯) ](../build/reference/clr-common-language-runtime-compilation.md)編譯器選項，則定義為001。 否則為未定義。

- `_M_CEE_PURE` 從 Visual Studio 2015 開始已淘汰。 如果已設定編譯器選項，則定義為 001 [**`/clr:pure`**](../build/reference/clr-common-language-runtime-compilation.md) 。 否則為未定義。

- `_M_CEE_SAFE` 從 Visual Studio 2015 開始已淘汰。 如果已設定編譯器選項，則定義為 001 [**`/clr:safe`**](../build/reference/clr-common-language-runtime-compilation.md) 。 否則為未定義。

- `_M_FP_EXCEPT` 如果 [**`/fp:except`**](../build/reference/fp-specify-floating-point-behavior.md) [**`/fp:strict`**](../build/reference/fp-specify-floating-point-behavior.md) 已設定或編譯器選項，則定義為1。 否則為未定義。

- `_M_FP_FAST` 如果已設定編譯器選項，則定義為 1 [**`/fp:fast`**](../build/reference/fp-specify-floating-point-behavior.md) 。 否則為未定義。

- `_M_FP_PRECISE` 如果已設定編譯器選項，則定義為 1 [**`/fp:precise`**](../build/reference/fp-specify-floating-point-behavior.md) 。 否則為未定義。

- `_M_FP_STRICT` 如果已設定編譯器選項，則定義為 1 [**`/fp:strict`**](../build/reference/fp-specify-floating-point-behavior.md) 。 否則為未定義。

- `_M_IX86` 針對以 x86 處理器為目標的編譯，定義為整數常值600。 此宏未針對 x64 或 ARM 編譯目標定義。

- `_M_IX86_FP` 定義為整數常值，表示 [**`/arch`**](../build/reference/arch-arm.md) 已設定的編譯器選項，或預設值。 當編譯目標為 x86 處理器時，一律會定義此宏。 否則為未定義。 當定義時，此值為：

  - 如果 `/arch:IA32` 編譯器選項已設定，則為0。

  - 如果 `/arch:SSE` 編譯器選項已設定，則為1。

  - 如果 `/arch:SSE2` `/arch:AVX` 已設定、、 `/arch:AVX2` 或編譯器選項，則為 2 `/arch:AVX512` 。 如果未指定編譯器選項，則此值為預設值 `/arch` 。 當 `/arch:AVX` 指定時， `__AVX__` 也會定義宏。 當 `/arch:AVX2` 指定時， `__AVX__` `__AVX2__` 也會定義和。 當指定時，、、、、、 `/arch:AVX512` `__AVX__` `__AVX2__` `__AVX512BW__` `__AVX512CD__` `__AVX512DQ__` `__AVX512F__` 和 `__AVX512VL__` 也會定義。

  - 如需詳細資訊，請參閱[ **`/arch`** (x86) ](../build/reference/arch-x86.md)。

- `_M_X64` 針對以 x64 處理器為目標的編譯，定義為整數常值100。 否則為未定義。

- `_MANAGED` 設定編譯器選項時，定義為 1 [**`/clr`**](../build/reference/clr-common-language-runtime-compilation.md) 。 否則為未定義。

- `_MSC_BUILD` 定義為整數常值，其中包含編譯器版本號碼的修訂編號元素。 修訂編號是句號分隔版本號碼的第四個元素。 例如，如果 Microsoft C/c + + 編譯器的版本號碼是15.00.20706.01，則 `_MSC_BUILD` 宏會評估為1。 一律會定義這個宏。

- `_MSC_EXTENSIONS`如果預設[ **`/Ze`** (啟用語言延伸模組) ](../build/reference/za-ze-disable-language-extensions.md)編譯器選項設定為1，則定義為1。 否則為未定義。

- `_MSC_FULL_VER` 定義為整數常值，用來編碼編譯器版本號碼的主要、次要和組建編號專案。 主要號碼是句號分隔版本號碼的第一個元素，次要號碼是第二個元素，而組建編號是第三個專案。 例如，如果 Microsoft C/c + + 編譯器的版本號碼是15.00.20706.01，則 `_MSC_FULL_VER` 宏會評估為150020706。 `cl /?`在命令列中輸入，以查看編譯器的版本號碼。 一律會定義這個宏。

- `_MSC_VER` 定義為整數常值，用來將編譯器版本號碼的主要和次要數位元素編碼。 主要號碼是句號分隔版本號碼的第一個元素，而次要號碼是第二個元素。 例如，如果 Microsoft C/c + + 編譯器的版本號碼是17.00.51106.1，則 `_MSC_VER` 宏會評估為1700。 `cl /?`在命令列中輸入，以查看編譯器的版本號碼。 一律會定義這個宏。

   | Visual Studio 版本 | `_MSC_VER` |
   |--|--|
   | Visual Studio 6.0 | 1200 |
   | Visual Studio .NET 2002 (7.0)  | 1300 |
   | Visual Studio .NET 2003 (7.1)  | 1310 |
   | Visual Studio 2005 (8.0)  | 1400 |
   | Visual Studio 2008 (9.0)  | 1500 |
   | Visual Studio 2010 (10.0)  | 1600 |
   | Visual Studio 2012 (11.0)  | 1700 |
   | Visual Studio 2013 (12.0)  | 1800 |
   | Visual Studio 2015 (14.0)  | 1900 |
   | Visual Studio 2017 RTW (15.0)  | 1910 |
   | Visual Studio 2017 15.3 版 | 1911 |
   | Visual Studio 2017 15.5 版 | 1912 |
   | Visual Studio 2017 15.6 版 | 1913 |
   | Visual Studio 2017 15.7 版 | 1914 |
   | Visual Studio 2017 15.8 版 | 1915 |
   | Visual Studio 2017 15.9 版 | 1916 |
   | Visual Studio 2019 RTW (16.0)  | 1920 |
   | Visual Studio 2019 16.1 版 | 1921 |
   | Visual Studio 2019 16.2 版 | 1922 |
   | Visual Studio 2019 16.3 版 | 1923 |
   |  Visual Studio 2019 16.4 版 | 1924 |
   | Visual Studio 2019 16.5 版 | 1925 |
   | Visual Studio 2019 16.6 版 | 1926 |
   | Visual Studio 2019 16.7 版 | 1927 |
   | Visual Studio 2019 16.8 版 | 1928 |

   若要在給定的 Visual Studio 版本或之後測試編譯器版本或更新，請使用 `>=` 運算子。 您可以在條件式指示詞中使用它來比較 `_MSC_VER` 該已知的版本。 如果您有數個相互專屬的版本要比較，請依版本號碼的遞減順序排序您的比較。 例如，此程式碼會檢查 Visual Studio 2017 和更新版本中發行的編譯器。 接著，它會檢查 Visual Studio 2015 或之後發行的編譯器。 然後，它會檢查 Visual Studio 2015 之前發行的所有編譯器：

   ```cpp
   #if _MSC_VER >= 1910
   // . . .
   #elif _MSC_VER >= 1900
   // . . .
   #else
   // . . .
   #endif
   ```

   如需詳細資訊，請參閱 Microsoft c + + Team Blog [Visual C++ 的編譯器版本](https://devblogs.microsoft.com/cppblog/visual-c-compiler-version/) 。

- `_MSVC_LANG` 定義為整數常值，指定編譯器的目標 c + + 語言標準。 它只會在編譯為 c + + 的程式碼中設定。 宏是預設201402L 的整數常值，或 [**`/std:c++14`**](../build/reference/std-specify-language-standard-version.md) 指定編譯器選項時。 如果指定編譯器選項，宏會設定為 201703L [**`/std:c++17`**](../build/reference/std-specify-language-standard-version.md) 。 當指定選項時，它會設定為較高、未指定的值 [**`/std:c++latest`**](../build/reference/std-specify-language-standard-version.md) 。 否則，宏為未定義。 `_MSVC_LANG`宏和[ **`/std`** (指定語言標準版本) ](../build/reference/std-specify-language-standard-version.md)編譯器選項從 Visual Studio 2015 Update 3 開始提供。

- `__MSVC_RUNTIME_CHECKS` 當其中一個 [**`/RTC`**](../build/reference/rtc-run-time-error-checks.md) 編譯器選項已設定時，定義為1。 否則為未定義。

- `_MSVC_TRADITIONAL` 設定預處理器一致性模式編譯器選項時，定義為 0 [**`/experimental:preprocessor`**](../build/reference/experimental-preprocessor.md) 。 預設會定義為1，或當 [**`/experimental:preprocessor-`**](../build/reference/experimental-preprocessor.md) 設定編譯器選項時，表示傳統預處理器正在使用中。 `_MSVC_TRADITIONAL`宏和[ **`/experimental:preprocessor`** (啟用預處理器一致性模式) ](../build/reference/experimental-preprocessor.md)編譯器選項從 Visual Studio 2017 15.8 版開始提供。

   ```cpp
   #if defined(_MSVC_TRADITIONAL) && _MSVC_TRADITIONAL
   // Logic using the traditional preprocessor
   #else
   // Logic using cross-platform compatible preprocessor
   #endif
   ```

- `_MT`定義為 1 when [ **`/MD`** 或 **`/MDd`** (多執行緒 DLL) ](../build/reference/md-mt-ld-use-run-time-library.md)或指定[ **`/MT`** **`/MTd`** (多執行緒) ](../build/reference/md-mt-ld-use-run-time-library.md) 。 否則為未定義。

- `_NATIVE_WCHAR_T_DEFINED` 設定編譯器選項時，定義為 1 [**`/Zc:wchar_t`**](../build/reference/zc-wchar-t-wchar-t-is-native-type.md) 。 否則為未定義。

- `_OPENMP`如果已設定[ **`/openmp`** (啟用 OpenMP 2.0 支援) ](../build/reference/openmp-enable-openmp-2-0-support.md)編譯器選項，則定義為整數常值200203。 此值代表 MSVC 所執行之 OpenMP 規格的日期。 否則為未定義。

   ```cpp
   // _OPENMP_dir.cpp
   // compile with: /openmp
   #include <stdio.h>
   int main() {
      printf("%d\n", _OPENMP);
   }
   ```

- `_PREFAST_` 設定編譯器選項時，定義為 1 [**`/analyze`**](../build/reference/analyze-code-analysis.md) 。 否則為未定義。

- `__TIMESTAMP__` 定義為字串常值，其中包含上次修改目前原始程式檔的日期和時間，以 CRT 函數所傳回的縮寫、常數長度形式 [`asctime`](../c-runtime-library/reference/asctime-wasctime.md) 表示 `Fri 19 Aug 13:32:58 2016` 。 一律會定義這個宏。

- `_VC_NODEFAULTLIB`當[ **`/Zl`** (省略預設程式庫名稱) ](../build/reference/zl-omit-default-library-name.md)編譯器選項已設定時，定義為1。 否則為未定義。

- `_WCHAR_T_DEFINED` 當設定預設編譯器選項時，定義為 1 [**`/Zc:wchar_t`**](../build/reference/zc-wchar-t-wchar-t-is-native-type.md) 。 `_WCHAR_T_DEFINED`如果已 **`/Zc:wchar_t-`** 設定編譯器選項，並 **`wchar_t`** 在包含于專案中的系統標頭檔中定義，則會定義宏，但不含任何值。 否則為未定義。

- `_WIN32` 當編譯目標為32位 ARM、64位 ARM、x86 或 x64 時，定義為1。 否則為未定義。

- `_WIN64` 當編譯目標為64位 ARM 或 x64 時，定義為1。 否則為未定義。

- `_WINRT_DLL`在編譯為 c + + 時定義為1，而且會同時設定[ **`/ZW`** (Windows 執行階段編譯) ](../build/reference/zw-windows-runtime-compilation.md) [ **`/LD`** **`/LDd`** 和編譯器選項](../build/reference/md-mt-ld-use-run-time-library.md)。 否則為未定義。

編譯器不會預先定義任何可識別 ATL 或 MFC 程式庫版本的預處理器宏。 ATL 和 MFC 程式庫標頭會在內部定義這些版本宏。 在包含必要標頭之前所建立的預處理器指示詞中，它們是未定義的。

- `_ATL_VER` 在中定義 \<atldef.h> 為整數常值，以編碼 ATL 版本號碼。

- `_MFC_VER` 在中定義 \<afxver_.h> 為整數常值，以編碼 MFC 版本號碼。

## <a name="see-also"></a>另請參閱

[巨集 (C/C++)](../preprocessor/macros-c-cpp.md)<br/>
[前置處理器運算子](../preprocessor/preprocessor-operators.md)<br/>
[前置處理器指示詞](../preprocessor/preprocessor-directives.md)
